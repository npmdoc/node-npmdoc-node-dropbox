<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/g33kidd/node-dropbox#readme"

    >node-dropbox (v0.1.8)</a>
</h1>
<h4>A simple Dropbox API client for node.js</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.node-dropbox">module node-dropbox</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-dropbox.AccessToken">
            function <span class="apidocSignatureSpan">node-dropbox.</span>AccessToken
            <span class="apidocSignatureSpan">(ckey, csecret, auth_code, redirect_url, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-dropbox.Authenticate">
            function <span class="apidocSignatureSpan">node-dropbox.</span>Authenticate
            <span class="apidocSignatureSpan">(ckey, csecret, redirect_uri, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.node-dropbox.api">
            function <span class="apidocSignatureSpan">node-dropbox.</span>api
            <span class="apidocSignatureSpan">(access_token)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.node-dropbox" id="apidoc.module.node-dropbox">module node-dropbox</a></h1>


    <h2>
        <a href="#apidoc.element.node-dropbox.AccessToken" id="apidoc.element.node-dropbox.AccessToken">
        function <span class="apidocSignatureSpan">node-dropbox.</span>AccessToken
        <span class="apidocSignatureSpan">(ckey, csecret, auth_code, redirect_url, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">AccessToken = function (ckey, csecret, auth_code, redirect_url, cb) {
  var url = apiRoot + &#x27;/oauth2/token&#x27;;
  var body = {
    &#x22;code&#x22;: auth_code,
    &#x22;grant_type&#x22;: &#x22;authorization_code&#x22;,
    &#x22;redirect_uri&#x22;: redirect_url,
    &#x22;client_id&#x22;: ckey,
    &#x22;client_secret&#x22;: csecret
  };

  request.post(url, {form: body, json: true}, function(err, res, body) {
    cb(err, body);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	node_dropbox.Authenticate(&#x27;key&#x27;, &#x27;secret&#x27;, &#x27;redirect_url&#x27;, function(err, url){
		// redirect user to the url.
		// looks like this: &#x22;https://www.dropbox.com/1/oauth2/authorize?client_id=&#x3c;key_here&#x3e;&#x26;response_type=code&#x26
;redirect_uri=&#x3c;redirect_url_here&#x3e;&#x22;
	});

On the page where you redirected to, you will need to use the AccessToken method to get the users access token for api use. The
redirect_url this time is only for validation, it will not need to redirect again.

	node_dropbox.<span class="apidocCodeKeywordSpan">AccessToken</span>(&#x27;key&#x27;, &#x27;secret&#x27;, &#x27;access_code&#x27
;, &#x27;redirect_url&#x27;, function(err, body) {
		access_token = body.access_token;
	});

#### Make API Calls

When you have the access token in hand, all you need to do is make api calls. That&#x27;s all it takes to get started with this
client.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-dropbox.Authenticate" id="apidoc.element.node-dropbox.Authenticate">
        function <span class="apidocSignatureSpan">node-dropbox.</span>Authenticate
        <span class="apidocSignatureSpan">(ckey, csecret, redirect_uri, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Authenticate = function (ckey, csecret, redirect_uri, cb) {
  var err = &#x22;&#x22;;
  var redirect_url = &#x22;&#x22;;

  if(ckey === &#x22;&#x22; || csecret === &#x22;&#x22; || redirect_uri === &#x22;&#x22;) {
    err = &#x22;Missing client key and/or client secret key.&#x22;;
  }else{
    redirect_url = authUrl + &#x22;client_id=&#x22; + ckey + &#x22;&#x26;response_type=code&#x26;redirect_uri=&#x22; + redirect_uri;
  }

  cb(err, redirect_url);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Before starting anything you need to go create your app over at: https://www.dropbox.com/developers/apps then go ahead and grab
your Key and Secret.

#### Authentication

Just use the Authenticate method to generate a url for your user to go to. This will be redirected back to another page.

	var node_dropbox = require(&#x27;node-dropbox&#x27;);
	node_dropbox.<span class="apidocCodeKeywordSpan">Authenticate</span>(&#x27;key&#x27;, &#x27;secret&#x27;, &#x27;redirect_url&#x27
;, function(err, url){
		// redirect user to the url.
		// looks like this: &#x22;https://www.dropbox.com/1/oauth2/authorize?client_id=&#x3c;key_here&#x3e;&#x26;response_type=code&#x26
;redirect_uri=&#x3c;redirect_url_here&#x3e;&#x22;
	});

On the page where you redirected to, you will need to use the AccessToken method to get the users access token for api use. The
redirect_url this time is only for validation, it will not need to redirect again.

	node_dropbox.AccessToken(&#x27;key&#x27;, &#x27;secret&#x27;, &#x27;access_code&#x27;, &#x27;redirect_url&#x27;, function(err,
body) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.node-dropbox.api" id="apidoc.element.node-dropbox.api">
        function <span class="apidocSignatureSpan">node-dropbox.</span>api
        <span class="apidocSignatureSpan">(access_token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">api = function (access_token) {

  var access_token = access_token;

  return {
    account: function(cb) {
      options = optionsBuilder(apiRoot + api.account, access_token);
      request.get(options, function(err, res, body) {
        cb(err, res, body);
      })
    },

    createDir: function(path, cb) {
      options = postBuilder(apiRoot + api.fileops.createFolder,
        {root:&#x22;auto&#x22;, path:path}, access_token);
      request.post(options, function(err, res, body) {
        cb(err, res, body);
      })
    },

    removeDir: function(path, cb) {
      options = postBuilder(apiRoot + api.fileops.remove,
        {root:&#x22;auto&#x22;, path:path}, access_token);
      request.post(options, function(err, res, body) {
        cb(err, res, body);
      });
    },

    moveSomething: function(from, to, cb) {
      options = postBuilder(apiRoot + api.fileops.move,
        {root:&#x22;auto&#x22;, from_path:from, to_path:to}, access_token);
      request.post(options, function(err, res, body) {
        cb(err, res, body);
      });
    },

    createFile: function(path, body, cb) {
      options = {
        method: &#x22;PUT&#x22;,
        url: apiContentRoot + api.putFiles + &#x22;/auto/&#x22; + path,
        headers: {
          &#x22;Content-Length&#x22;: getByteLength(body),
          &#x22;Authorization&#x22;: &#x22;Bearer &#x22; + access_token
        },
        json: true,
        body: body
      }

      request(options, function(err, res, body) {
        cb(err, res, body);
      })
    },

    removeFile: function(path, cb) {
      options = postBuilder(apiRoot + api.fileops.remove,
        {root: &#x22;auto&#x22;, path:path}, access_token);
      request.post(options, function(err, res, body) {
        cb(err, res, body);
      });
    },

<span class="apidocCodeCommentSpan">    /**
     * get the metadata of a file or folder
     * the result body.contents can be used to list a folder&#x27;s content
     */
</span>    getMetadata: function(path, cb) {
      options = optionsBuilder(apiRoot + api.metadata + &#x22;/auto/&#x22; + path, access_token);
      request.get(options, function(err, res, body) {
        cb(err, res, body);
      });
    },

    /**
     * Downloads a file.
     */
    getFile: function(path, cb) {
      options = optionsBuilder(apiContentRoot + api.getFiles + &#x27;/auto&#x27; + path, access_token);

      request(options, function(err, res, body) {
        cb(err, res, body);
      })
    },

    /**
     * Let connect pipe to downloaded file.
     */
    getFilePipe: function(path, cb) {
      options = optionsBuilder(apiContentRoot + api.getFiles + &#x27;/auto&#x27; + path, access_token);

      return request(options, cb)
    },

    /**
     * Gets changes to files and folders in a user&#x27;s Dropbox.
     */
    getDelta: function(cursor, path, cb) {
      options = postBuilder(apiRoot + &#x27;/delta&#x27;,
        {cursor:cursor, path_prefix:path}, access_token);
      request.post(options, function(err, res, body) {
        cb(err, res, body);
      })
    },

    /**
     * Gets notifications from server
     */
    getNotifications: function(cursor, timeout, cb) {
      var cursor = cursor || null,
        timeout = timeout || 480,
        url = apiLongPoll + &#x27;?cursor=&#x27; + cursor + &#x27;&#x26;timeout=&#x27; + timeout;

      request.get(url, function(err, res, body) {
        cb(err, res, body);
      });
    }
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		access_token = body.access_token;
	});

#### Make API Calls

When you have the access token in hand, all you need to do is make api calls. That&#x27;s all it takes to get started with this
client.

	api = node_dropbox.<span class="apidocCodeKeywordSpan">api</span>(access_token);
	api.account(function(err, res, body) {
		console.log(body);
	});

The above output will be something like:

	{
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
